!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.MultiviewMapComponent=e()}}(function(){return function e(t,n,o){function r(u,l){if(!n[u]){if(!t[u]){var i="function"==typeof require&&require;if(!l&&i)return i(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return r(n?n:e)},s,s.exports,e,t,n,o)}return n[u].exports}for(var a="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,a=t,u=n;o=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;if(void 0===i)return;return i.call(u)}var f=Object.getPrototypeOf(r);if(null===f)return;e=f,t=a,n=u,o=!0,l=f=void 0}},i="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,f=t(i),s=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={featureId:e.featureId,geojsonUrl:e.geojsonUrl,handleSubmit:e.handleSubmit},this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}return a(t,e),u(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;this.setState(o({},r,n))}},{key:"handleSubmit",value:function(e){console.log("A featureId was submitted: ",this.state.featureId),console.log("A geojsonUrl was submitted: ",this.state.geojsonUrl),this.state.handleSubmit(this.state.featureId,this.state.geojsonUrl),e.preventDefault()}},{key:"render",value:function(){return console.log("rendering the debug view"),f["default"].createElement("form",{onSubmit:this.handleSubmit},f["default"].createElement("label",null,"FeatureId:",f["default"].createElement("input",{type:"text",name:"featureId",value:this.state.featureId,onChange:this.handleInputChange})),f["default"].createElement("label",null,"GeoJsonURL:",f["default"].createElement("input",{type:"text",name:"geojsonUrl",value:this.state.geojsonUrl,onChange:this.handleInputChange})),f["default"].createElement("input",{type:"submit",value:"Submit"}))}}]),t}(f["default"].Component);n.DebugViewComponent=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t,n){for(var o=!0;o;){var r=e,a=t,u=n;o=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;if(void 0===i)return;return i.call(u)}var f=Object.getPrototypeOf(r);if(null===f)return;e=f,t=a,n=u,o=!0,l=f=void 0}},f="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,s=r(f),c=e("react-leaflet"),d=e("./DebugViewComponent.js"),p=function(e){function t(e){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={context:e.context,geojsonUrl:null,geojson:null,color:"red",featureId:"",lat:51.3,lng:10,zoom:5.5},this.state.context.subscribe(this,this.onChange)}return u(t,e),l(t,[{key:"onChange",value:function(e,t){console.log("update the react map"),null!=e.geojsonUrl&&fetch(e.geojsonUrl,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(n){t.setState({featureId:e.featureId,geojsonUrl:e.geojsonUrl,geojson:n})})["catch"](function(e){console.log(e)})}},{key:"handleSubmit",value:function(e,t){console.log("changedfeatureId",e),console.log("changedGeojsonUrl",t),this.state.context.featureId=e,this.state.context.geojsonUrl=t}},{key:"reverseLongLat",value:function(e,t){var n=this;return e.map(function(e){return t>1?n.reverseLongLat(e,t-1):e.reverse()})}},{key:"features",value:function(){var e=this,t=this.state.geojson?this.state.geojson.features:[];return t=t.map(function(t){console.log(t);var n=t.geometry.coordinates;switch(t.geometry.type){case"Polygon":n=e.reverseLongLat(n,2);break;case"MultiPolygon":n=e.reverseLongLat(n,3);break;default:console.log(t)}return t.geometry.coordinates=n,t})}},{key:"polygonColor",value:function(e){var t=this.state.featureId,n=e.properties&&e.properties.external_id;return t==e.id||t==n?"red":"blue"}},{key:"render",value:function(){var e=this,t=[this.state.lat,this.state.lng];return console.log("render all"),s["default"].createElement("div",null,s["default"].createElement(c.Map,{center:t,zoom:this.state.zoom},s["default"].createElement(c.TileLayer,{attribution:'Â© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),this.features().map(function(t,n){return s["default"].createElement(c.Polygon,{key:n,positions:t.geometry.coordinates,color:e.polygonColor(t)})}),s["default"].createElement(c.Marker,{position:t},s["default"].createElement(c.Popup,null,s["default"].createElement("span",null,s["default"].createElement("strong",null,"Feature Id:")," ",this.state.featureId,".")))),this.state.featureId&&this.state.geojsonUrl&&s["default"].createElement(d.DebugViewComponent,{featureId:this.state.featureId,geojsonUrl:this.state.geojsonUrl,handleSubmit:function(t,n){return e.handleSubmit(t,n)}}))}}]),t}(f.Component);n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DebugViewComponent.js":1,"react-leaflet":void 0}]},{},[2])(2)});